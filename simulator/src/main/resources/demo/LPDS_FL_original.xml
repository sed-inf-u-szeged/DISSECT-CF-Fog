<?xml version="1.0" encoding="UTF-8"?>
<cloud id="sztaki-lpds"
  scheduler="hu.mta.sztaki.lpds.cloud.simulator.iaas.vmscheduling.RoundRobinScheduler"
  pmcontroller="hu.mta.sztaki.lpds.cloud.simulator.iaas.pmscheduling.AlwaysOnMachines">

  <!-- ======== Original LPDS machines & repos (unchanged) ======== -->
  <machine id="plutoPM" cores="64" processing="0.001" memory="256000000000">
    <powerstates kind="host">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="296" max="493" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="20" max="20" inState="OFF"/>
    </powerstates>
    <statedelays startup="89000" shutdown="29000"/>
    <repository id="pluto" capacity="5000000000000" inBW="250000" outBW="250000" diskBW="50000">
      <powerstates kind="storage">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="6.5" max="9" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <powerstates kind="network">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.4" max="3.8" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <latency towards="sasha" value="5"/>
      <latency towards="moon" value="5"/>
      <latency towards="mimas" value="5"/>
      <latency towards="enceladus" value="5"/>
      <latency towards="rhea" value="5"/>
      <latency towards="thetys" value="5"/>
      <latency towards="dione" value="5"/>
      <latency towards="io" value="5"/>
      <latency towards="callisto" value="5"/>
      <latency towards="europa" value="5"/>
      <latency towards="ganymede" value="5"/>
      <latency towards="ceph" value="5"/>
      <latency towards="iscsi-izabel" value="5"/>
    </repository>
  </machine>

  <machine id="sashaPM" cores="32" processing="0.001434063" memory="128000000000">
    <powerstates kind="host">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="398" max="533" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="20" max="20" inState="OFF"/>
    </powerstates>
    <statedelays startup="89000" shutdown="29000"/>
    <repository id="sasha" capacity="6000000000000" inBW="125000" outBW="125000" diskBW="50000">
      <powerstates kind="storage">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="6.5" max="9" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <powerstates kind="network">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.4" max="3.8" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <latency towards="pluto" value="5"/>
      <latency towards="moon" value="5"/>
      <latency towards="mimas" value="5"/>
      <latency towards="enceladus" value="5"/>
      <latency towards="rhea" value="5"/>
      <latency towards="thetys" value="5"/>
      <latency towards="dione" value="5"/>
      <latency towards="io" value="5"/>
      <latency towards="callisto" value="5"/>
      <latency towards="europa" value="5"/>
      <latency towards="ganymede" value="5"/>
      <latency towards="ceph" value="5"/>
      <latency towards="iscsi-izabel" value="5"/>
    </repository>
  </machine>

  <machine id="moonPM" cores="48" processing="0.0010625" memory="128000000000">
    <powerstates kind="host">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="398" max="533" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="20" max="20" inState="OFF"/>
    </powerstates>
    <statedelays startup="89000" shutdown="29000"/>
    <repository id="moon" capacity="6000000000000" inBW="125000" outBW="125000" diskBW="50000">
      <powerstates kind="storage">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="6.5" max="9" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <powerstates kind="network">
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.4" max="3.8" inState="default"/>
        <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
      </powerstates>
      <latency towards="pluto" value="5"/>
      <latency towards="sasha" value="5"/>
      <latency towards="mimas" value="5"/>
      <latency towards="enceladus" value="5"/>
      <latency towards="rhea" value="5"/>
      <latency towards="thetys" value="5"/>
      <latency towards="dione" value="5"/>
      <latency towards="io" value="5"/>
      <latency towards="callisto" value="5"/>
      <latency towards="europa" value="5"/>
      <latency towards="ganymede" value="5"/>
      <latency towards="ceph" value="5"/>
      <latency towards="iscsi-izabel" value="5"/>
    </repository>
  </machine>

  <!-- (Other original machines: mimasPM, enceladusPM, rheaPM, thetysPM, dionePM, ioPM, callistoPM, europaPM, ganymedePM) -->
  <!-- For brevity, they are unchanged and can be kept as in your original LPDS_Original.xml -->

  <!-- Original standalone repos -->
  <repository id="ceph" capacity="38000000000000" inBW="250000" outBW="250000" diskBW="100000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="65" max="90" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.4" max="3.8" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="pluto" value="5"/>
    <latency towards="sasha" value="5"/>
    <latency towards="moon" value="5"/>
    <latency towards="mimas" value="5"/>
    <latency towards="enceladus" value="5"/>
    <latency towards="rhea" value="5"/>
    <latency towards="thetys" value="5"/>
    <latency towards="dione" value="5"/>
    <latency towards="io" value="5"/>
    <latency towards="callisto" value="5"/>
    <latency towards="europa" value="5"/>
    <latency towards="ganymede" value="5"/>
    <latency towards="iscsi-izabel" value="5"/>
  </repository>

  <repository id="iscsi-izabel" capacity="32000000000000" inBW="250000" outBW="250000" diskBW="100000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="65" max="90" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.4" max="3.8" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="pluto" value="5"/>
    <latency towards="sasha" value="5"/>
    <latency towards="moon" value="5"/>
    <latency towards="mimas" value="5"/>
    <latency towards="enceladus" value="5"/>
    <latency towards="rhea" value="5"/>
    <latency towards="thetys" value="5"/>
    <latency towards="dione" value="5"/>
    <latency towards="io" value="5"/>
    <latency towards="callisto" value="5"/>
    <latency towards="europa" value="5"/>
    <latency towards="ganymede" value="5"/>
    <latency towards="ceph" value="5"/>
  </repository>

  <!-- ======== FL demo additions ======== -->

  <!-- 1) Aggregator-side repository used by the FL Orchestrator -->
  <repository id="ceph-FL-Aggregator-S1" capacity="1000000000000" inBW="250000" outBW="250000" diskBW="100000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="20" max="35" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3.0" max="6.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>

    <!-- Latencies to device repos (symmetry added below on each device repo) -->
    <latency towards="dummy-repo-0" value="5"/>
    <latency towards="dummy-repo-1" value="5"/>
    <latency towards="dummy-repo-2" value="5"/>
    <latency towards="dummy-repo-3" value="5"/>
    <latency towards="dummy-repo-4" value="5"/>
    <latency towards="dummy-repo-5" value="5"/>
    <latency towards="dummy-repo-6" value="5"/>
    <latency towards="dummy-repo-7" value="5"/>
    <latency towards="dummy-repo-8" value="5"/>
    <latency towards="dummy-repo-9" value="5"/>

    <!-- Optional: visibility to existing LPDS repos (not strictly required) -->
    <latency towards="ceph" value="5"/>
  </repository>

  <!-- 2) Ten device-side repos representing your participating devices -->
  <!--    Bandwidth & power are modest and symmetrical. -->
  <repository id="dummy-repo-0" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-1" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-2" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-3" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-4" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-5" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-6" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-7" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-8" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

  <repository id="dummy-repo-9" capacity="1000000000" inBW="125000" outBW="125000" diskBW="25000">
    <powerstates kind="storage">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="3" max="6" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <powerstates kind="network">
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.LinearConsumptionModel" idle="1.0" max="2.0" inState="default"/>
      <power model="hu.mta.sztaki.lpds.cloud.simulator.energy.powermodelling.ConstantConsumptionModel" idle="0" max="0" inState="OFF"/>
    </powerstates>
    <latency towards="ceph-FL-Aggregator-S1" value="5"/>
  </repository>

</cloud>
